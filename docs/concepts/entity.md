# ğŸ§± Entityï¼šç»Ÿä¸€çš„å®ä½“è¡¨ç¤º

TongSim ä¸­çš„ `Entity` æ˜¯å¯¹ TongSim ä¸–ç•Œä¸­å¯¹è±¡ï¼ˆå¦‚æ™ºèƒ½ä½“ã€å®¶å…·ã€ç›¸æœºä¼ æ„Ÿå™¨ã€ä¸€äº›å…¨å±€ç®¡ç†å™¨å¯¹è±¡ç­‰ï¼‰çš„ç»Ÿä¸€æŠ½è±¡ã€‚å®ƒç»§æ‰¿ Unreal ä¸­ `Actor + Component` çš„ç»„åˆç»“æ„ï¼Œå¹¶åœ¨ Python SDK ä¸­é€šè¿‡èƒ½åŠ›ç»„åˆï¼ˆAbilityï¼‰æ„å»ºé«˜å¯æ‹“å±•çš„å®ä½“è¡¨ç¤ºã€‚

[API å‚è€ƒ](../api/entity_base.md)

---

## Unreal çš„ç»“æ„èƒŒæ™¯

åœ¨ Unreal ä¸­ï¼Œæ‰€æœ‰åœºæ™¯å¯¹è±¡éƒ½æ˜¯ `Actor`ï¼Œå…¶è¡Œä¸ºå’Œå±æ€§ç”±æŒ‚è½½çš„ `Component` å†³å®šã€‚ç†è®ºä¸Šï¼Œä¸åŒå¯¹è±¡åº”ç»„åˆä¸åŒçš„ç»„ä»¶ä»¥è¡¨ç°å…¶åŠŸèƒ½ã€‚

TongSim Unreal ä¸­ä¸ºäº†å¿«é€Ÿæ”¯æŒå„ç§äº¤äº’é€»è¾‘ï¼Œ**å‡ ä¹æ‰€æœ‰ç±»å‹çš„ Actor éƒ½é»˜è®¤æŒ‚è½½äº†ç»å¤§éƒ¨åˆ†ç±»å‹çš„ Component**ï¼Œå³ä½¿è¿™äº›ç»„ä»¶åœ¨å®é™…è¿è¡Œä¸­æ¯«æ— æ„ä¹‰ã€‚å¯¼è‡´å¦‚ä¸‹é—®é¢˜ï¼š

ä¾‹å¦‚ï¼š

> ä¸€ä¸ªç©ºè°ƒï¼ˆAirConditionerï¼‰Actor å†…ä¹Ÿå¯èƒ½æŒ‚è½½äº† `FoodComponent`ï¼Œå¯¼è‡´å®ƒåœ¨æ¥å£å±‚ä¹Ÿâ€œå¯ä»¥è¢«åƒæ‰â€ã€‚

è¿™ç±»â€œæ— æ„ä¹‰èƒ½åŠ›â€çš„æ··æ‚è®©é€šä¿¡å±‚çš„ Actor è¡¨è¾¾å˜å¾—è‡ƒè‚¿ã€æ¨¡ç³Šï¼Œä¹Ÿè®© Python ç«¯éš¾ä»¥ç²¾å‡†åœ°è¡¨è¾¾ä¸€ä¸ªå¯¹è±¡â€œèƒ½åšä»€ä¹ˆâ€ã€‚

---

## âœ… Entity + Ability

ä¸ºäº†é‡æ„å®ä½“é€»è¾‘ï¼ŒTongSim Python SDK å¼•å…¥ Ability é‡ç»„ Entityï¼š

### Entity çš„èŒè´£

- æŒæœ‰ Entity ID ä¸æ‰€æœ‰ç»„ä»¶ ID
- æä¾›èƒ½åŠ›åˆ¤æ–­ä¸è®¿é—®ï¼ˆAbilityï¼‰
- ä¸åŒ…å«å®é™…ç»„ä»¶æ•°æ®ï¼Œä»…ä½œä¸ºè¡Œä¸ºè·¯ç”±ä¸­å¿ƒ

### Ability æ˜¯ä»€ä¹ˆï¼Ÿ

[Ability](ability.md) æ˜¯ä¸€ç»„æ¥å£åè®®ï¼ˆProtocolï¼‰ï¼Œä»£è¡¨æŸç§åŠŸèƒ½èƒ½åŠ›ï¼š

- `CameraAbility`ï¼šå›¾åƒé‡‡é›†èƒ½åŠ›
- `AssetAbility`ï¼šèµ„äº§ä¿¡æ¯èƒ½åŠ›

æ¯ç§ Ability å‡å¯¹åº”ä¸€ä¸ªå®ç°ç±»ï¼ˆImplï¼‰ï¼Œç”± SDK å†…éƒ¨æ ¹æ®ç»„ä»¶é…ç½®è‡ªåŠ¨åŒ¹é…ç”Ÿæˆã€‚

### ä½¿ç”¨æ–¹å¼ç¤ºä¾‹

```python
if entity.has_ability(CameraAbility):
    camera = entity.as_(CameraAbility)
    camera.start_imagedata_streaming(rgb=True)
```

SDK ä¼šæ ¹æ®ç»„ä»¶ç»“æ„ï¼Œè‡ªåŠ¨åˆ¤æ–­æ˜¯å¦æ”¯æŒè¯¥èƒ½åŠ›å¹¶ç»‘å®šå®ç°ã€‚

!!! info "æ¨èä½¿ç”¨ç»„åˆå®ä½“ç±»å‹"
    é™¤äº† `as_(Ability)` çš„æ–¹å¼ï¼Œæˆ‘ä»¬æ›´æ¨èä½¿ç”¨**ç»„åˆå¥½çš„å®ä½“ç±»**ï¼ˆå¦‚ `AgentEntity`, `CameraEntity`ï¼‰ï¼Œè¿™äº›ç±»åœ¨å®šä¹‰æ—¶å·²ç»‘å®šå¥½å¸¸ç”¨èƒ½åŠ›ï¼Œå¹¶æä¾›æ›´æ¸…æ™°çš„ä»£ç æç¤ºä¸å°è£…ã€‚
    <!-- è¯¦è§ï¼š[ç»„åˆå®ä½“ç±»å‹è¯´æ˜](./mixin_entity.md) -->

---

## è·å– Entity çš„æ–¹å¼

ä½ å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼åˆ›å»ºæˆ–è·å– Entityï¼š

### ğŸ†• spawn_entity()

åˆ›å»ºæ–°çš„å®ä½“å¯¹è±¡ï¼ˆå¦‚æ”¾ç½®ä¸€ä¸ªç‰©å“ã€ç”Ÿæˆä¸€ä¸ª agent ç­‰ï¼‰ï¼š

```python
entity = ue.spawn_entity(
    entity_type=ts.BaseObjectEntity,
    blueprint="BP_Cup",
    location=Vector3(0.0, 0.0, 100.0),
)
```

è‹¥ä½ å·²å®šä¹‰å¥½è‡ªå®šä¹‰ Entity ç±»ï¼ˆå¦‚ `MyCustomEntity`ï¼‰ï¼Œå¯ä¼ å…¥ `entity_type=MyCustomEntity` å®ç°å°è£…ã€‚

- **blueprint åç§°å¯ä»¥å‚è€ƒ [TongAI èµ„äº§åº“](https://asset-tongai.mybigai.ac.cn/)**

### ğŸ“Œ entity_from_id()

è‹¥ä½ å·²çŸ¥å®ä½“çš„å”¯ä¸€ IDï¼Œå¯é€šè¿‡æ­¤æ–¹æ³•å¿«é€Ÿæ¢å¤å®ä½“å¯¹è±¡ï¼š

```python
entity = ue.entity_from_id(ts.BaseObjectEntity, entity_id="BP_Cup_C_1")
```

ç›¸æ¯” `get_entity_by_name`ï¼Œè¯¥æ¥å£æ€§èƒ½æ›´ä¼˜ã€‚

### ğŸ” get_entity_by_name()

å¯é€šè¿‡å®ä½“åç§°æ¨¡ç³Šæœç´¢å¹¶æ¢å¤å®ä½“ï¼š

```python
entity = ue.get_entity_by_name(ts.BaseObjectEntity, name="Cup")
```

å†…éƒ¨åŸºäº UE çš„ object åç§°è¿›è¡ŒåŒ¹é…ï¼Œé€‚åˆæµ‹è¯•å’Œéç²¾ç¡®åœºæ™¯ã€‚

### ğŸ“¦ get_entities_by_rdf_type()

æ ¹æ®ç±»å‹ï¼ˆå¦‚ `"cup"`, `"tv"`ï¼‰æ‰¹é‡è·å–ä¸€ä¸ªåœºæ™¯ä¸­æ‰€æœ‰è¯¥ç±»å‹çš„å®ä½“ï¼š

```python
cups = ue.get_entities_by_rdf_type(ts.BaseObjectEntity, rdf_type="cup")
```

é€‚ç”¨äºæ³›åŒ–ä»»åŠ¡æ‰§è¡Œæˆ–è¯­ä¹‰ä»»åŠ¡è§„åˆ’ã€‚

---
